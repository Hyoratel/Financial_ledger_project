import{g as y,h as v,i as k,j as s,c as u,a as o,b as _,u as d,k as x,F as C,o as l}from"./index-DS7DNUH_.js";import{C as S,p as E,c as L,d as O,L as D,a as j,b as w,P as B,A,f as T,D as F}from"./index-BqCLuSRE.js";const M={class:"bg-white p-6 rounded-xl shadow-md mb-8"},N={class:"bg-white p-6 rounded-xl shadow-md"},P={key:1,class:"text-gray-500 text-sm"},$={__name:"ChartMonthlySpending",setup(V){S.register(E,L,O,D,j,w,B,A);const r=y(),p=v();k(()=>{r.fetchTransactions()});const c=s(()=>r.transactions.filter(e=>e.userId===p.user.id)),i=s(()=>{const e={};return c.value.forEach(t=>{if(t.type==="expense"){const a=t.date.slice(0,7);e[a]=(e[a]||0)+t.amount}}),e}),n=s(()=>{const e={};return c.value.forEach(t=>{if(t.type==="expense"){const a=t.category||"기타";e[a]=(e[a]||0)+t.amount}}),e}),g=s(()=>Object.keys(n.value).length>0),f=s(()=>{const e=Object.keys(i.value).sort(),t=e.map(a=>i.value[a]);return{labels:e,datasets:[{label:"월별 지출",data:t,borderColor:"#f87171",backgroundColor:"#fecaca",tension:.3}]}}),b={responsive:!0,plugins:{legend:{position:"top"}},scales:{x:{grid:{display:!1}},y:{grid:{display:!1}}}},m=s(()=>{const e=Object.keys(n.value),t=e.map(a=>n.value[a]);return{labels:e,datasets:[{label:"카테고리별 지출",data:t,backgroundColor:["#f87171","#fb923c","#facc15","#34d399","#60a5fa","#a78bfa"],borderColor:"#fff",borderWidth:2,cutout:"50%",hoverOffset:30}]}}),h={responsive:!0,plugins:{legend:{position:"bottom"},tooltip:{callbacks:{label:e=>`${e.parsed.toLocaleString()} 원`}}}};return(e,t)=>(l(),u(C,null,[o("div",M,[t[0]||(t[0]=o("h2",{class:"text-lg font-bold mb-4"},"📈 월별 지출 추이",-1)),_(d(T),{data:f.value,options:b,class:"mb-6"},null,8,["data"])]),o("div",N,[t[1]||(t[1]=o("h2",{class:"text-lg font-bold mb-4"},"💰 카테고리별 지출",-1)),g.value?(l(),x(d(F),{key:0,data:m.value,options:h},null,8,["data"])):(l(),u("p",P," 📌 지출 카테고리 데이터가 없습니다. "))])],64))}};export{$ as default};
